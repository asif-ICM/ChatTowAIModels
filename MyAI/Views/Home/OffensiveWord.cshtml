@model List<MyChatMessage>

@{
    ViewData["Title"] = "Chat";
}

<div class="chat-container">
    <div class="chat-input-container">
        <form method="post" class="chat-form">
            <div class="input-group">
                <input type="text" name="question" class="form-control" placeholder="Type your message..." autocomplete="off">
                <button type="submit" class="btn btn-primary">Send</button>
            </div>
        </form>
    </div>
    <div class="chat-messages">
        @foreach (var message in Model)
        {
            <div class="message @(message.IsUserMessage ? "user-message" : "bot-message")">
                <h4> <i> </i> @(message.IsUserMessage ? "User" : "AI") </h4>
                <p>@message.Message</p>
                <small>@message.Timestamp.ToString("g")</small>
            </div>
        }
    </div>
</div>

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    .chat-container {
        display: flex;
        flex-direction: column;
        height: 70vh;
        max-width: 900px;
        margin: 0 auto;
        padding: 0;
        background: #f9f9f9;
    }
    .chat-input-container {
        padding: 20px 20px 10px 20px;
        background-color: #fff;
        border-bottom: 1px solid #ddd;
    }
    .chat-form {
        width: 100%;
    }
    .input-group {
        width: 100%;
        display: flex;
    }
    .input-group .form-control {
        border-radius: 20px 0 0 20px;
        padding: 10px 20px;
        flex: 1;
    }
    .input-group .btn {
        border-radius: 0 20px 20px 0;
        padding: 10px 25px;
    }
    .chat-messages {
        flex: 1 1 auto;
        overflow-y: auto;
        padding: 20px;
        border-top: 1px solid #ddd;
        background-color: #fff;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .message {
        padding: 10px;
        border-radius: 8px;
        max-width: 70%;
        word-break: break-word;
    }
    .user-message {
        background-color: #e3f2fd;
        margin-left: auto;
    }
    .bot-message {
        background-color: #f5f5f5;
        margin-right: auto;
    }
</style>
